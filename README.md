# Comment Player

Code is generated by GPT-4. More than 90% of code are generated automatically and unmodified.
Following is the decription of this player generated by GPT-4 using only source code as input.

## Input / Output
* Input: The program takes a video file path as an argument. It also takes text input in the form of comments, which the user can enter into a text box while the video is playing.

* Output: The program displays a video player that plays the specified video and overlays comments at the time they were entered. The comments are also saved to a JSON file, which can be loaded later. Furthermore, the comments are converted into speech and played as audio.

## Features:

* Video Player: The program plays video files and displays them in a user interface.

* Text-to-Speech: The entered comments are converted to speech using the VOICEVOX server, which is a Text-to-Speech (TTS) engine. English words are first translated to Katakana (Japanese syllabic script) and then synthesized to speech.

* Comment Overlay: The user can enter comments while the video is playing. These comments are displayed on top of the video at the time they were entered.

* Comment History: The comments, along with their timestamps, are saved to a JSON file, which can be loaded later. Comments are displayed in a table, and each comment can be deleted.

* GUI Application: The program presents a GUI where users can control video playback, enter comments, save/load comments, etc.

## How Users Use This Application:

* Run the Application: The user starts the application by providing a video file path as an argument. If the user doesn't provide a file path, the application will exit, displaying usage information.

* Play/Pause Video: Once the application starts, the user can play or pause the video using the play button.

* Enter Comments: While the video is playing, the user can enter comments into a text box. When they press the Enter key, the comment is displayed on top of the video at the current time position and converted into speech that is played as audio.

* Save/Load Comments: The user can save all their comments to a JSON file, which they can load later. The loaded comments will be displayed in a table.

* Delete Comments: The user can also delete comments from the table. They simply need to click the delete icon next to the comment they want to remove.

* Close the Application: The user can close the application by closing the video player window. The application will quit completely when the window is closed.


# Video Comment Overlay Tool

## Overview

This tool provides the ability to overlay text and audio comments on a given video. It uses various libraries like OpenCV, PIL, moviepy, ffmpeg, tqdm, pydub, MeCab, and unidic to handle video and text processing, and requests to communicate with external APIs.

The main functionalities include:
- Converting alphabets to Katakana.
- Reading comments from a JSON file.
- Creating text images and overlaying them on the video.
- Overlaying audio comments.
- Previewing the video with overlaid comments.
- Generating the final video file with both text and audio comments.

## Features

1. **Text Comments Overlay**: Overlay text comments at specific time intervals over a video.
2. **Audio Comments Overlay**: Overlay audio comments to a video.
3. **Previewing Video**: Preview the video with overlaid comments without saving it.
4. **Generate Final Video**: Create the final video with both text and audio comments.

## Input / Output files

### Input:

- **Video File**: Path to the source video file on which comments will be overlaid.
- **Comments File**: A JSON file named `<video-filename>.comments.json`, containing the text comments with timing details, located in the same directory as the input video.

### Output:

- **Final Video File**: The generated video with both text and audio comments overlaid, named as `<video-filename>_final.mp4`, saved in the same directory as the input video.

## Usage of the Command

### Generating Preview Video:

Use the following command to generate a preview of the video with comments:

```bash
python <script-name.py> <video-filename> --preview <audio-speed-scale>
```

### Combining Text Overlay and Audio Comments:

Use the following command to combine the text overlay video and audio comments:

```bash
python <script-name.py> <video-filename> --audio
```

### Generating Final Video with Text and Audio Comments:

Use the following command to generate the final video:

```bash
python <script-name.py> <video-filename>
```

### Parameters:

- `<script-name.py>`: The name of the Python script.
- `<video-filename>`: The path to the input video file.
- `<audio-speed-scale>`: (Optional) A float value to control the speed of the audio.

## Dependencies

Make sure the following libraries are installed in your environment:

- OpenCV
- PIL
- moviepy
- ffmpeg
- tqdm
- pydub
- MeCab
- unidic
- requests
- pandas
- alkana

Also, ensure the font file `/usr/share/fonts/opentype/noto/NotoSansCJK-Bold.ttc` is available on your system.

## License

Specify your license here.

## Contributing

Specify your contribution guidelines here.
